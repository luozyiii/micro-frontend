# å¾®å‰ç«¯æ¼”ç¤ºå¹³å°

åŸºäº Rsbuild + Module Federation çš„ç°ä»£åŒ–å¾®å‰ç«¯æ¶æ„æ¼”ç¤ºé¡¹ç›®ï¼Œå±•ç¤ºæ‰å¹³åŒ–è®¾è®¡å’Œæ¨¡å—åŒ–å¼€å‘çš„æœ€ä½³å®è·µã€‚

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

ä¸€ä¸ªå®Œæ•´çš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆï¼ŒåŒ…å«ä¸»åº”ç”¨ã€å­åº”ç”¨å’Œå…±äº«ç»„ä»¶åº“ï¼Œæ¼”ç¤ºäº†ç°ä»£å¾®å‰ç«¯æ¶æ„çš„æ ¸å¿ƒæ¦‚å¿µå’Œå®ç°æ–¹å¼ã€‚

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

- **æ„å»ºå·¥å…·**: Rsbuild + Module Federation
- **å‰ç«¯æ¡†æ¶**: React 18 + TypeScript
- **æ ·å¼æ–¹æ¡ˆ**: CSS Modules
- **çŠ¶æ€ç®¡ç†**: React State + localStorage
- **è·¯ç”±ç®¡ç†**: React Router (ä»…ä¸»åº”ç”¨)

## ğŸ“ é¡¹ç›®ç»“æ„

```
module-federation/
â”œâ”€â”€ shell/              # ä¸»åº”ç”¨ (ç«¯å£ 3000)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx     # åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ Layout.tsx  # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ pages/      # é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ rsbuild.config.ts
â”œâ”€â”€ counter/            # è®¡æ•°å™¨åº”ç”¨ (ç«¯å£ 3001)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx     # è®¡æ•°å™¨åº”ç”¨
â”‚   â”‚   â””â”€â”€ Counter.tsx # è®¡æ•°å™¨ç»„ä»¶
â”‚   â””â”€â”€ rsbuild.config.ts
â”œâ”€â”€ todos/              # å¾…åŠåº”ç”¨ (ç«¯å£ 3002)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx     # å¾…åŠåº”ç”¨
â”‚   â”‚   â””â”€â”€ TodoList.tsx# å¾…åŠç»„ä»¶
â”‚   â””â”€â”€ rsbuild.config.ts
â”œâ”€â”€ ui-kit/             # å…±äº«ç»„ä»¶åº“
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ Button/     # æŒ‰é’®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Input/      # è¾“å…¥æ¡†ç»„ä»¶
â”‚   â”‚   â””â”€â”€ Card/       # å¡ç‰‡ç»„ä»¶
â”‚   â””â”€â”€ package.json
â””â”€â”€ package.json        # æ ¹é…ç½®
```

## ğŸ¨ åº”ç”¨åŠŸèƒ½

### ğŸ  ä¸»åº”ç”¨ (Shell)
- **ç»Ÿä¸€å¯¼èˆª**: æ·±è‰²åŠé€æ˜æ¯›ç»ç’ƒå¯¼èˆªæ 
- **è·¯ç”±ç®¡ç†**: React Router é›†æˆå­åº”ç”¨
- **å“åº”å¼å¸ƒå±€**: é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **æ‰å¹³åŒ–è®¾è®¡**: ç°ä»£åŒ–è§†è§‰é£æ ¼

### ğŸ”¢ è®¡æ•°å™¨åº”ç”¨
- **åŸºç¡€æ“ä½œ**: å¢åŠ ã€å‡å°‘ã€é‡ç½®åŠŸèƒ½
- **æ•°æ®æŒä¹…åŒ–**: è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
- **å®æ—¶åé¦ˆ**: å³æ—¶æ˜¾ç¤ºå½“å‰æ•°å€¼

### âœ… å¾…åŠäº‹é¡¹åº”ç”¨
- **ä»»åŠ¡ç®¡ç†**: æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€å®Œæˆä»»åŠ¡
- **æ™ºèƒ½è¿‡æ»¤**: å…¨éƒ¨/å¾…å®Œæˆ/å·²å®ŒæˆçŠ¶æ€ç­›é€‰
- **æ•°æ®ç»Ÿè®¡**: å®æ—¶ç»Ÿè®¡å’Œè¿›åº¦å¯è§†åŒ–
- **æ‰¹é‡æ“ä½œ**: æ¸…é™¤å·²å®Œæˆã€æ¸…é™¤å…¨éƒ¨
- **åŒå‡»ç¼–è¾‘**: ç›´è§‚çš„ä»»åŠ¡ç¼–è¾‘ä½“éªŒ

### ğŸ¨ UI ç»„ä»¶åº“
- **ç»Ÿä¸€è®¾è®¡ç³»ç»Ÿ**: æ‰å¹³åŒ–é£æ ¼ï¼Œ4px åœ†è§’
- **å¤šç§ç»„ä»¶**: Buttonã€Inputã€Card ç­‰
- **å°ºå¯¸è§„èŒƒ**: sm/md/lg ä¸‰ç§å°ºå¯¸
- **ä¸»é¢˜ä¸€è‡´**: æ©™è‰²ä¸»é¢˜è‰² (#f77f00)

## âš¡ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 16.0.0
- pnpm >= 8.0.0

### 1. å®‰è£… pnpm (å¦‚æœå°šæœªå®‰è£…)

```bash
npm install -g pnpm
```

### 2. å…‹éš†é¡¹ç›®å¹¶å®‰è£…ä¾èµ–

```bash
git clone <repository-url>
cd module-federation
pnpm install
```

### 3. å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨è„šæœ¬å¯åŠ¨ (æ¨è)
pnpm run start

# æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨
pnpm run setup  # æ„å»º UI Kit
pnpm run dev    # å¯åŠ¨æ‰€æœ‰åº”ç”¨

# æ–¹å¼ä¸‰ï¼šåˆ†åˆ«å¯åŠ¨
pnpm run dev:shell    # ä¸»åº”ç”¨
pnpm run dev:counter  # è®¡æ•°å™¨
pnpm run dev:todos    # å¾…åŠ
pnpm run dev:ui-kit   # UI ç»„ä»¶åº“
```

### 4. è®¿é—®åº”ç”¨

- ğŸ  **ä¸»åº”ç”¨**: http://localhost:3000
- ğŸ”¢ **è®¡æ•°å™¨**: http://localhost:3000/counter (é›†æˆ) | http://localhost:3001 (ç‹¬ç«‹)
- âœ… **å¾…åŠäº‹é¡¹**: http://localhost:3000/todos (é›†æˆ) | http://localhost:3002 (ç‹¬ç«‹)
- ğŸ¨ **UI ç»„ä»¶åº“**: http://localhost:6006 (Storybook)

## ğŸ“ å­¦ä¹ é‡ç‚¹

### Module Federation æ ¸å¿ƒæ¦‚å¿µ

- **Host vs Remote**: ä¸»åº”ç”¨ä¸å¾®åº”ç”¨çš„å…³ç³»
- **æš´éœ²ä¸æ¶ˆè´¹**: ç»„ä»¶çš„å¯¼å‡ºå’Œå¯¼å…¥æœºåˆ¶
- **ä¾èµ–å…±äº«**: React ç­‰å…¬å…±åº“çš„å…±äº«ç­–ç•¥

### å¾®å‰ç«¯æœ€ä½³å®è·µ

- **ç‹¬ç«‹å¼€å‘**: å„åº”ç”¨ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•
- **ç‹¬ç«‹éƒ¨ç½²**: æ”¯æŒå•ç‹¬éƒ¨ç½²å’Œæ›´æ–°
- **è¿è¡Œæ—¶é›†æˆ**: æµè§ˆå™¨ä¸­åŠ¨æ€ç»„åˆåº”ç”¨
- **æŠ€æœ¯éš”ç¦»**: ä¸åŒåº”ç”¨å¯ç”¨ä¸åŒæŠ€æœ¯æ ˆ

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

âœ… **é›¶é…ç½®å¯åŠ¨**: ä¸€é”®å¯åŠ¨æ‰€æœ‰åº”ç”¨
âœ… **çƒ­æ›´æ–°æ”¯æŒ**: å¼€å‘æ—¶å®æ—¶é¢„è§ˆ
âœ… **TypeScript**: å®Œæ•´çš„ç±»å‹æ”¯æŒ
âœ… **ç»„ä»¶å…±äº«**: è·¨åº”ç”¨å¤ç”¨UIç»„ä»¶
âœ… **çŠ¶æ€éš”ç¦»**: å„åº”ç”¨ç‹¬ç«‹çš„çŠ¶æ€ç®¡ç†
âœ… **pnpm å·¥ä½œç©ºé—´**: é«˜æ•ˆçš„åŒ…ç®¡ç†å’Œä¾èµ–å…±äº«

## ğŸ“‹ å¯ç”¨è„šæœ¬

### å¼€å‘å‘½ä»¤

```bash
pnpm run dev          # å¯åŠ¨æ‰€æœ‰åº”ç”¨
pnpm run dev:shell    # å¯åŠ¨ä¸»åº”ç”¨
pnpm run dev:counter  # å¯åŠ¨è®¡æ•°å™¨åº”ç”¨
pnpm run dev:todos    # å¯åŠ¨å¾…åŠåº”ç”¨
pnpm run dev:ui-kit   # å¯åŠ¨ UI ç»„ä»¶åº“å¼€å‘æ¨¡å¼
```

### æ„å»ºå‘½ä»¤

```bash
pnpm run build        # æ„å»ºæ‰€æœ‰åº”ç”¨
pnpm run build:shell  # æ„å»ºä¸»åº”ç”¨
pnpm run build:counter # æ„å»ºè®¡æ•°å™¨åº”ç”¨
pnpm run build:todos   # æ„å»ºå¾…åŠåº”ç”¨
pnpm run build:ui-kit  # æ„å»º UI ç»„ä»¶åº“
```

### è´¨é‡æ£€æŸ¥

```bash
pnpm run lint         # è¿è¡Œ ESLint æ£€æŸ¥
pnpm run lint:fix     # è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜
pnpm run type-check   # TypeScript ç±»å‹æ£€æŸ¥
pnpm run format       # ä»£ç æ ¼å¼åŒ–
```

### å…¶ä»–å‘½ä»¤

```bash
pnpm run clean        # æ¸…ç†æ„å»ºäº§ç‰©
pnpm run setup        # åˆå§‹åŒ–é¡¹ç›® (å®‰è£…ä¾èµ– + æ„å»º UI Kit)
pnpm run start        # å¿«é€Ÿå¯åŠ¨å¼€å‘ç¯å¢ƒ
```

## âš™ï¸ é…ç½®æ–‡ä»¶è¯´æ˜

### ä»£ç è´¨é‡å’Œæ ¼å¼åŒ–

- **`.eslintrc.js`** - ESLint é…ç½®ï¼Œä»£ç è´¨é‡æ£€æŸ¥
- **`.prettierrc`** - Prettier é…ç½®ï¼Œä»£ç æ ¼å¼åŒ–
- **`.editorconfig`** - ç¼–è¾‘å™¨é…ç½®ï¼Œç¡®ä¿å›¢é˜Ÿä»£ç é£æ ¼ä¸€è‡´

### ç‰ˆæœ¬æ§åˆ¶

- **`.gitignore`** - Git å¿½ç•¥æ–‡ä»¶é…ç½®
- **`.gitattributes`** - Git å±æ€§é…ç½®ï¼Œå¤„ç†æ¢è¡Œç¬¦å’Œæ–‡ä»¶ç±»å‹

### åŒ…ç®¡ç†

- **`pnpm-workspace.yaml`** - pnpm å·¥ä½œç©ºé—´é…ç½®
- **`.npmrc`** - npm/pnpm é…ç½®
- **`.nvmrc`** - Node.js ç‰ˆæœ¬æŒ‡å®š

### æ„å»ºå·¥å…·

- **`tsconfig.json`** - TypeScript é…ç½®
- **`rsbuild.config.ts`** - Rsbuild æ„å»ºé…ç½®
- **`module-federation.config.ts`** - Module Federation é…ç½®
