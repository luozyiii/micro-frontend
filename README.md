# å¾®å‰ç«¯å­¦ä¹ é¡¹ç›®

åŸºäº Rsbuild + Module Federation çš„å¾®å‰ç«¯æ¶æ„æ¼”ç¤º

## ğŸ¯ é¡¹ç›®ç›®æ ‡

é€šè¿‡ç®€å•çš„ç¤ºä¾‹å­¦ä¹ å¾®å‰ç«¯æ ¸å¿ƒæ¦‚å¿µï¼Œä¸“æ³¨æŠ€æœ¯å®ç°è€Œéå¤æ‚ä¸šåŠ¡

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

- **æ„å»ºå·¥å…·**: Rsbuild + Module Federation
- **å‰ç«¯æ¡†æ¶**: React 18 + TypeScript
- **æ ·å¼æ–¹æ¡ˆ**: CSS Modules
- **çŠ¶æ€ç®¡ç†**: React State + localStorage
- **è·¯ç”±ç®¡ç†**: React Router (ä»…ä¸»åº”ç”¨)

## ğŸ“ é¡¹ç›®ç»“æ„

```
module-federation/
â”œâ”€â”€ shell/              # ä¸»åº”ç”¨ (ç«¯å£ 3000)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx     # åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ Layout.tsx  # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ pages/      # é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ rsbuild.config.ts
â”œâ”€â”€ counter/            # è®¡æ•°å™¨åº”ç”¨ (ç«¯å£ 3001)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx     # è®¡æ•°å™¨åº”ç”¨
â”‚   â”‚   â””â”€â”€ Counter.tsx # è®¡æ•°å™¨ç»„ä»¶
â”‚   â””â”€â”€ rsbuild.config.ts
â”œâ”€â”€ todos/              # å¾…åŠåº”ç”¨ (ç«¯å£ 3002)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx     # å¾…åŠåº”ç”¨
â”‚   â”‚   â””â”€â”€ TodoList.tsx# å¾…åŠç»„ä»¶
â”‚   â””â”€â”€ rsbuild.config.ts
â”œâ”€â”€ ui-kit/             # å…±äº«ç»„ä»¶åº“
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ Button/     # æŒ‰é’®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Input/      # è¾“å…¥æ¡†ç»„ä»¶
â”‚   â”‚   â””â”€â”€ Card/       # å¡ç‰‡ç»„ä»¶
â”‚   â””â”€â”€ package.json
â””â”€â”€ package.json        # æ ¹é…ç½®
```

## ğŸ¨ åŠŸèƒ½æ¼”ç¤º

### ä¸»åº”ç”¨ (shell)

- ğŸ§­ **å¯¼èˆªèœå•**: Home | Counter | Todos
- ï¿½ **åº”ç”¨å®¹å™¨**: åŠ¨æ€åŠ è½½å¾®å‰ç«¯åº”ç”¨
- ğŸ¨ **ç»Ÿä¸€å¸ƒå±€**: å¤´éƒ¨å¯¼èˆª + å†…å®¹åŒºåŸŸ

### è®¡æ•°å™¨åº”ç”¨ (counter)

- ğŸ”¢ **æ•°å­—æ˜¾ç¤º**: å½“å‰è®¡æ•°å€¼
- â• **å¢åŠ æŒ‰é’®**: +1 æ“ä½œ
- â– **å‡å°‘æŒ‰é’®**: -1 æ“ä½œ
- ğŸ”„ **é‡ç½®æŒ‰é’®**: å½’é›¶æ“ä½œ
- ğŸ’¾ **çŠ¶æ€æŒä¹…åŒ–**: localStorage å­˜å‚¨

### å¾…åŠåº”ç”¨ (todos)

- âœï¸ **æ·»åŠ å¾…åŠ**: è¾“å…¥æ–°ä»»åŠ¡
- âœ… **æ ‡è®°å®Œæˆ**: åˆ‡æ¢å®ŒæˆçŠ¶æ€
- ğŸ—‘ï¸ **åˆ é™¤ä»»åŠ¡**: ç§»é™¤å¾…åŠé¡¹
- ğŸ“Š **ç»Ÿè®¡ä¿¡æ¯**: æ€»æ•°/å®Œæˆæ•°æ˜¾ç¤º
- ğŸ’¾ **æœ¬åœ°å­˜å‚¨**: æ•°æ®æŒä¹…åŒ–

### å…±äº«ç»„ä»¶åº“ (ui-kit)

- ğŸ¨ **Button**: ä¸»è¦/æ¬¡è¦/å±é™©æ ·å¼
- ğŸ“ **Input**: æ–‡æœ¬è¾“å…¥æ¡†
- ğŸƒ **Card**: å¡ç‰‡å®¹å™¨
- ğŸ­ **ç»Ÿä¸€è®¾è®¡**: ä¸€è‡´çš„è§†è§‰é£æ ¼

## âš¡ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 16.0.0
- pnpm >= 8.0.0

### 1. å®‰è£… pnpm (å¦‚æœå°šæœªå®‰è£…)

```bash
npm install -g pnpm
```

### 2. å…‹éš†é¡¹ç›®å¹¶å®‰è£…ä¾èµ–

```bash
git clone <repository-url>
cd module-federation
pnpm install
```

### 3. å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨è„šæœ¬å¯åŠ¨ (æ¨è)
pnpm run start

# æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨
pnpm run setup  # æ„å»º UI Kit
pnpm run dev    # å¯åŠ¨æ‰€æœ‰åº”ç”¨

# æ–¹å¼ä¸‰ï¼šåˆ†åˆ«å¯åŠ¨
pnpm run dev:shell    # ä¸»åº”ç”¨
pnpm run dev:counter  # è®¡æ•°å™¨
pnpm run dev:todos    # å¾…åŠ
pnpm run dev:ui-kit   # UI ç»„ä»¶åº“
```

### 4. è®¿é—®åº”ç”¨

- ğŸ  **ä¸»åº”ç”¨**: http://localhost:3000
- ğŸ”¢ **è®¡æ•°å™¨**: http://localhost:3001 (ç‹¬ç«‹è®¿é—®)
- âœ… **å¾…åŠ**: http://localhost:3002 (ç‹¬ç«‹è®¿é—®)

## ğŸ“ å­¦ä¹ é‡ç‚¹

### Module Federation æ ¸å¿ƒæ¦‚å¿µ

- **Host vs Remote**: ä¸»åº”ç”¨ä¸å¾®åº”ç”¨çš„å…³ç³»
- **æš´éœ²ä¸æ¶ˆè´¹**: ç»„ä»¶çš„å¯¼å‡ºå’Œå¯¼å…¥æœºåˆ¶
- **ä¾èµ–å…±äº«**: React ç­‰å…¬å…±åº“çš„å…±äº«ç­–ç•¥

### å¾®å‰ç«¯æœ€ä½³å®è·µ

- **ç‹¬ç«‹å¼€å‘**: å„åº”ç”¨ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•
- **ç‹¬ç«‹éƒ¨ç½²**: æ”¯æŒå•ç‹¬éƒ¨ç½²å’Œæ›´æ–°
- **è¿è¡Œæ—¶é›†æˆ**: æµè§ˆå™¨ä¸­åŠ¨æ€ç»„åˆåº”ç”¨
- **æŠ€æœ¯éš”ç¦»**: ä¸åŒåº”ç”¨å¯ç”¨ä¸åŒæŠ€æœ¯æ ˆ

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

âœ… **é›¶é…ç½®å¯åŠ¨**: ä¸€é”®å¯åŠ¨æ‰€æœ‰åº”ç”¨
âœ… **çƒ­æ›´æ–°æ”¯æŒ**: å¼€å‘æ—¶å®æ—¶é¢„è§ˆ
âœ… **TypeScript**: å®Œæ•´çš„ç±»å‹æ”¯æŒ
âœ… **ç»„ä»¶å…±äº«**: è·¨åº”ç”¨å¤ç”¨UIç»„ä»¶
âœ… **çŠ¶æ€éš”ç¦»**: å„åº”ç”¨ç‹¬ç«‹çš„çŠ¶æ€ç®¡ç†
âœ… **pnpm å·¥ä½œç©ºé—´**: é«˜æ•ˆçš„åŒ…ç®¡ç†å’Œä¾èµ–å…±äº«

## ğŸ“‹ å¯ç”¨è„šæœ¬

### å¼€å‘å‘½ä»¤

```bash
pnpm run dev          # å¯åŠ¨æ‰€æœ‰åº”ç”¨
pnpm run dev:shell    # å¯åŠ¨ä¸»åº”ç”¨
pnpm run dev:counter  # å¯åŠ¨è®¡æ•°å™¨åº”ç”¨
pnpm run dev:todos    # å¯åŠ¨å¾…åŠåº”ç”¨
pnpm run dev:ui-kit   # å¯åŠ¨ UI ç»„ä»¶åº“å¼€å‘æ¨¡å¼
```

### æ„å»ºå‘½ä»¤

```bash
pnpm run build        # æ„å»ºæ‰€æœ‰åº”ç”¨
pnpm run build:shell  # æ„å»ºä¸»åº”ç”¨
pnpm run build:counter # æ„å»ºè®¡æ•°å™¨åº”ç”¨
pnpm run build:todos   # æ„å»ºå¾…åŠåº”ç”¨
pnpm run build:ui-kit  # æ„å»º UI ç»„ä»¶åº“
```

### è´¨é‡æ£€æŸ¥

```bash
pnpm run lint         # è¿è¡Œ ESLint æ£€æŸ¥
pnpm run lint:fix     # è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜
pnpm run type-check   # TypeScript ç±»å‹æ£€æŸ¥
pnpm run format       # ä»£ç æ ¼å¼åŒ–
```

### å…¶ä»–å‘½ä»¤

```bash
pnpm run clean        # æ¸…ç†æ„å»ºäº§ç‰©
pnpm run setup        # åˆå§‹åŒ–é¡¹ç›® (å®‰è£…ä¾èµ– + æ„å»º UI Kit)
pnpm run start        # å¿«é€Ÿå¯åŠ¨å¼€å‘ç¯å¢ƒ
```

## âš™ï¸ é…ç½®æ–‡ä»¶è¯´æ˜

### ä»£ç è´¨é‡å’Œæ ¼å¼åŒ–

- **`.eslintrc.js`** - ESLint é…ç½®ï¼Œä»£ç è´¨é‡æ£€æŸ¥
- **`.prettierrc`** - Prettier é…ç½®ï¼Œä»£ç æ ¼å¼åŒ–
- **`.editorconfig`** - ç¼–è¾‘å™¨é…ç½®ï¼Œç¡®ä¿å›¢é˜Ÿä»£ç é£æ ¼ä¸€è‡´

### ç‰ˆæœ¬æ§åˆ¶

- **`.gitignore`** - Git å¿½ç•¥æ–‡ä»¶é…ç½®
- **`.gitattributes`** - Git å±æ€§é…ç½®ï¼Œå¤„ç†æ¢è¡Œç¬¦å’Œæ–‡ä»¶ç±»å‹

### åŒ…ç®¡ç†

- **`pnpm-workspace.yaml`** - pnpm å·¥ä½œç©ºé—´é…ç½®
- **`.npmrc`** - npm/pnpm é…ç½®
- **`.nvmrc`** - Node.js ç‰ˆæœ¬æŒ‡å®š

### æ„å»ºå·¥å…·

- **`tsconfig.json`** - TypeScript é…ç½®
- **`rsbuild.config.ts`** - Rsbuild æ„å»ºé…ç½®
- **`module-federation.config.ts`** - Module Federation é…ç½®
